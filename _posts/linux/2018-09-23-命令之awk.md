---
layout: post
---  
 
awk是行处理器: 相比较屏幕处理的优点，在处理庞大文件时不会出现内存溢出或是处理缓慢的问题，通常用来格式化文本信息  
awk处理过程: 依次对每一行进行处理，然后输出  
awk命令形式:  
awk [-F|-f|-v] ‘BEGIN{} //{command1; command2} END{}’ file  
 [-F|-f|-v]   大参数，-F指定分隔符，-f调用脚本，-v定义变量 var=value  
'  '          引用代码块    
BEGIN   初始化代码块，在对每一行进行处理之前，初始化代码，主要是引用全局变量，设置FS分隔符  
//           匹配代码块，可以是字符串或正则表达式  
{}           命令代码块，包含一条或多条命令  
；          多条命令使用分号分隔  
END      结尾代码块，在对每一行进行处理之后再执行的代码块，主要是进行最终计算或输出结尾摘要信息  
 
特殊要点:  
$0           表示整个当前行  
$1           每行第一个字段  
NF          字段数量变量  
NR          每行的记录号，多文件记录递增  
FNR        与NR类似，不过多文件记录不递增，每个文件都从1开始  
\t            制表符  
\n           换行符  
FS          BEGIN时定义分隔符  
RS       输入的记录分隔符， 默认为换行符(即文本是按一行一行输入)  
~            匹配，与==相比不是精确比较  
!~           不匹配，不精确比较  
==         等于，必须全部相等，精确比较  
!=           不等于，精确比较  
&&　     逻辑与  
||             逻辑或  
+            匹配时表示1个或1个以上  
/[0-9][0-9]+/   两个或两个以上数字  
/[0-9][0-9]*/    一个或一个以上数字  
FILENAME 文件名  
OFS      输出字段分隔符， 默认也是空格，可以改为制表符等  
ORS        输出的记录分隔符，默认为换行符,即处理结果也是一行一行输出到屏幕  
-F'[:#/]'   定义三个分隔符  

**应用场景**

 *  NF NR
 
 ```html
 1. $awk '{print $2, $1}' XX.txt  --打印第一、二列
 2. $awk '{print $NF}' xx.txt   -- 打印最后一列
 3. $awk '{print $NF-1}' xx.txt -- 打印倒数第二列
```
 
  * 计算
  
  ```html
  1. awk '{a=1; b=3;  print a+b}'
  2. awk '{a=1; b=3;  print a*b}'
  ```
  
  * 正则表达式  
  
   ```html
   1. awk '/abc/{print $0}' data.txt  -- 打印第一列，所有包含abc的字符串
   2. awk '/ac/{print NF " "$2}' README.md  --打印行号
   
   ```
  
 
****
  